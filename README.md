# ğŸ¨ AI é»‘æ¿ç”»ç”Ÿæˆå™¨

ä¸€ä¸ªåŸºäº Cloudflare Edge Computing çš„ AI å›¾ç‰‡ç”ŸæˆæœåŠ¡ï¼Œä¸“æ³¨äºç”Ÿæˆé»‘æ¿ç²‰ç¬”ç”»é£æ ¼çš„è‰ºæœ¯ä½œå“ã€‚æ”¯æŒå¤šç§ AI æ¨¡å‹æ™ºèƒ½å…œåº•ï¼Œç¡®ä¿æœåŠ¡é«˜å¯ç”¨æ€§ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ–¼ï¸ æ™ºèƒ½å›¾ç‰‡ç”Ÿæˆ
- **é»‘æ¿ç²‰ç¬”ç”»é£æ ¼**: ä¸“æ³¨ç”Ÿæˆæ•™å®¤é»‘æ¿ç²‰ç¬”ç”»æ•ˆæœ
- **å¤šé£æ ¼æ‰©å±•**: æ”¯æŒäº‘å½©ã€è¯¾æœ¬é“…ç¬”ç”»ç­‰å¤šç§è‰ºæœ¯é£æ ¼  
- **æ™ºèƒ½æç¤ºè¯ä¼˜åŒ–**: AI è‡ªåŠ¨ä¼˜åŒ–æç¤ºè¯ä»¥è¾¾åˆ°æœ€ä½³è§†è§‰æ•ˆæœ
- **å®æ—¶ç”Ÿæˆ**: ç§’çº§å“åº”ï¼Œç”¨æˆ·ä½“éªŒæµç•…

### ğŸ¤– å¤šå±‚ API æ™ºèƒ½å…œåº•
- **ä¸»æœåŠ¡**: Google Gemini APIï¼ˆç¯å¢ƒå˜é‡é…ç½®ï¼‰
- **ç¬¬ä¸‰æ–¹æ”¯æŒ**: Grok APIã€OpenAI å…¼å®¹æ¥å£
- **æ™ºèƒ½æ•…éšœè½¬ç§»**: è‡ªåŠ¨åˆ‡æ¢å¥åº· APIï¼ŒæœåŠ¡ä¸ä¸­æ–­
- **ä¼˜å…ˆçº§ç®¡ç†**: çµæ´»çš„ API æƒé‡å’Œä¼˜å…ˆçº§é…ç½®
- **å®æ—¶ç›‘æ§**: å®Œæ•´çš„ API çŠ¶æ€ç›‘æ§å’Œè¯Šæ–­

### ğŸ”§ å¼ºå¤§çš„ç®¡ç†åå°
- **å®‰å…¨è®¤è¯**: åŸºäº Token çš„å®‰å…¨ç®¡ç†ç³»ç»Ÿ
- **API é…ç½®ç®¡ç†**: ä¸€é”®æ·»åŠ ã€æµ‹è¯•ã€ç®¡ç†å¤šä¸ªç¬¬ä¸‰æ–¹ API
- **æç¤ºè¯æ¨¡æ¿**: è‡ªå®šä¹‰å’Œç¼–è¾‘å¤šç§é£æ ¼æç¤ºè¯
- **å›¾ç‰‡åº“ç®¡ç†**: ä½œå“å±•ç¤ºå’Œç®¡ç†
- **å®æ—¶çŠ¶æ€**: API å¥åº·çŠ¶æ€å’Œæ€§èƒ½ç›‘æ§é¢æ¿

### ğŸ›¡ï¸ ä¼ä¸šçº§å¯é æ€§
- **ä¸‰å±‚ä¿æŠ¤æœºåˆ¶**: æ™ºèƒ½å…œåº• â†’ ç´§æ€¥æ¢å¤ â†’ è¯¦ç»†é”™è¯¯æŠ¥å‘Š
- **è‡ªåŠ¨æ¢å¤**: å¤±è´¥ API 30 åˆ†é’Ÿåè‡ªåŠ¨é‡æ–°å¯ç”¨
- **é”™è¯¯éš”ç¦»**: å•ä¸ª API æ•…éšœä¸å½±å“æ•´ä½“æœåŠ¡
- **å®Œæ•´æ—¥å¿—**: å…¨é“¾è·¯è°ƒç”¨è¿½è¸ªå’Œæ€§èƒ½åˆ†æ

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—

### å‰ç½®è¦æ±‚
- Cloudflare è´¦å·ï¼ˆå…è´¹å³å¯ï¼‰
- Google Cloud è´¦å·ï¼ˆè·å– Gemini API Keyï¼‰
- Git åŸºç¡€æ“ä½œèƒ½åŠ›

### ç¬¬ä¸€æ­¥ï¼šè·å– API å¯†é’¥

#### 1.1 Google Gemini API
```bash
# è®¿é—® Google AI Studio
https://aistudio.google.com/app/apikey

# åˆ›å»ºæ–°çš„ APIå¯†é’¥
# å¤åˆ¶å¯†é’¥ï¼Œæ ¼å¼å¦‚ï¼šAIzaSyBlahBlahBlah
```

### ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²åˆ° Cloudflare Pages

#### 2.1 å…‹éš†é¡¹ç›®
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/keenturbo/AI-Chalkboard-Art.git
cd AI-Chalkboard-Art

# å¯é€‰ï¼šä¿®æ”¹ä¸ºä½ è‡ªå·±çš„ä»“åº“å
echo "ai-chalkboard-art" > .project-name
```

#### 2.2 éƒ¨ç½²åˆ° Cloudflare Pages
```bash
# å®‰è£… Wrangler CLI
npm install -g wrangler

# ç™»å½• Cloudflare
npx wrangler login

# éƒ¨ç½²åˆ° Pages
npx wrangler pages deploy public --project-name ai-chalkboard-art
```

#### 2.3 é€šè¿‡ Web ç•Œé¢éƒ¨ç½²ï¼ˆæ¨èæ–°æ‰‹ï¼‰
1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. é€‰æ‹© Pages â†’ Create a project â†’ Connect to Git
3. æˆæƒ GitHubï¼Œé€‰æ‹© `AI-Chalkboard-Art` ä»“åº“
4. æ„å»ºè®¾ç½®ä¿æŒé»˜è®¤
5. ç‚¹å‡» Save and Deploy

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

#### 3.1 è®¿é—®é¡¹ç›®è®¾ç½®
```
Cloudflare Dashboard â†’ Pages â†’ ai-chalkboard-art â†’ Settings â†’ Environment variables
```

#### 3.2 æ·»åŠ å¿…éœ€çš„ç¯å¢ƒå˜é‡
```
# ä¸» API å¯†é’¥ï¼ˆå¿…éœ€ï¼‰
GEMINI_API_KEY=AIzaSyBlahBlahBlahYourGeminiKeyHere

# Cloudflare å­˜å‚¨é…ç½®ï¼ˆå¿…éœ€ï¼‰
KV_AI_CHALKBOARD=your_kv_namespace_id_here
R2_BUCKET=your_r2_bucket_name_here

# å¯é€‰é…ç½®
AI_MODEL_URL=                            # è‡ªå®šä¹‰ API ç«¯ç‚¹
```

#### 3.3 åˆ›å»º KV å’Œ R2 èµ„æº
```
# åˆ›å»º KV å‘½åç©ºé—´
Cloudflare Dashboard â†’ Workers & Pages â†’ KV â†’ Create namespace
# å‘½åä¸ºï¼šai-chalkboard-config

# åˆ›å»º R2 å­˜å‚¨æ¡¶
Cloudflare Dashboard â†’ R2 â†’ Create bucket  
# å‘½åä¸ºï¼šai-chalkboard-art-images
```

#### 3.4 ç»‘å®šèµ„æº
```
Settings â†’ Functions â†’ KV namespace bindings
# æ·»åŠ ï¼šVariable name: KV_AI_CHALKBOARD â†’ é€‰æ‹©åˆšåˆ›å»ºçš„ KV

Settings â†’ R2 object storage
# æ·»åŠ ï¼šVariable name: R2_BUCKET â†’ é€‰æ‹©åˆšåˆ›å»ºçš„ R2 bucket
```

### ç¬¬å››æ­¥ï¼šè®¿é—®å’Œé…ç½®

#### 4.1 è®¿é—®éƒ¨ç½²å¥½çš„ç½‘ç«™
```
# ä¸»é¡µé¢
https://ai-chalkboard-art.pages.dev

# ç®¡ç†åå°
https://ai-chalkboard-art.pages.dev/admin.html
```

#### 4.2 é¦–æ¬¡ç™»å½•è®¾ç½®
- **é»˜è®¤è´¦å·**: `admin`
- **é»˜è®¤å¯†ç **: `admin`
- **é‡è¦**: ç™»å½•åç«‹å³ä¿®æ”¹å¯†ç ï¼

## ğŸ“‹ å®Œæ•´ä½¿ç”¨æŒ‡å—

### ç”¨æˆ·ç•Œé¢ä½¿ç”¨

#### åŸºç¡€å›¾ç‰‡ç”Ÿæˆ
1. **è¾“å…¥è§’è‰²åç§°**: å¦‚"Hello Kitty"ã€"çš®å¡ä¸˜"ã€"å°çŒ«å’ª"
2. **é€‰æ‹©é£æ ¼**: 
   - ğŸ« é»‘æ¿ç²‰ç¬”ç”»ï¼ˆé»˜è®¤ï¼‰
   - â˜ï¸ ç°å®ä¸»ä¹‰äº‘å½©
   - âœï¸ è¯¾æœ¬é“…ç¬”ç”»
   - æ›´å¤šé£æ ¼å¯åå°æ·»åŠ 
3. **ç‚¹å‡»ç”Ÿæˆ**: AI è‡ªåŠ¨é€‰æ‹©æœ€ä½³ API ç”Ÿæˆå›¾ç‰‡

#### é™åˆ¶è¯´æ˜
- **å…è´¹é¢åº¦**: æ¯æ—¥ 3 æ¬¡å…è´¹ç”Ÿæˆ
- **é‡ç½®æ—¶é—´**: æ¯æ—¥ 0 ç‚¹ï¼ˆUTC+8ï¼‰è‡ªåŠ¨é‡ç½®
- **æ— é™åˆ¶éƒ¨ç½²**: è‡ªå·±éƒ¨ç½²å¯ç§»é™¤æ‰€æœ‰é™åˆ¶

### ç®¡ç†åå°é…ç½®

#### ğŸ” å®‰å…¨è®¾ç½®
- **ä¿®æ”¹å¯†ç **: åŸºç¡€è®¾ç½® â†’ æ›´æ–°ç®¡ç†å‡­è¯
- **Token ç®¡ç†**: è‡ªåŠ¨ç”Ÿæˆå®‰å…¨ä»¤ç‰Œç”¨äº API è°ƒç”¨
- **è®¿é—®æ—¥å¿—**: æŸ¥çœ‹ç®¡ç†æ“ä½œå†å²

#### ğŸ¤– API é…ç½®ç®¡ç†

##### æ·»åŠ ç¬¬ä¸‰æ–¹ API
1. è¿›å…¥ "API é…ç½®ç®¡ç†"
2. ç‚¹å‡» "æ·»åŠ æ–° API"
3. å¡«å†™é…ç½®ä¿¡æ¯ï¼š
   ```
   APIåç§°: Grok
   æä¾›å•†: grok
   åŸºç¡€URL: https://api.x.ai/v1
   APIå¯†é’¥: xai-your-key-here
   æ¨¡å‹åç§°: grok-4.1-fast
   ä¼˜å…ˆçº§: 2
   ```

##### API æµ‹è¯•å’Œç›‘æ§
- **è¿æ¥æµ‹è¯•**: ç‚¹å‡» "æµ‹è¯•è¿æ¥" éªŒè¯ API é…ç½®
- **çŠ¶æ€ç›‘æ§**: å®æ—¶æŸ¥çœ‹ API å¥åº·çŠ¶æ€
- **ä¼˜å…ˆçº§è°ƒæ•´**: æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆ1 æœ€é«˜ï¼‰

##### å…œåº•ç­–ç•¥é…ç½®
```
ç¤ºä¾‹é…ç½®ï¼š
ä¼˜å…ˆçº§1: Gemini (ç¯å¢ƒå˜é‡ï¼Œä¸»è¦æœåŠ¡)
ä¼˜å…ˆçº§2: Grok API (ç¬¬ä¸‰æ–¹å…œåº•)
ä¼˜å…ˆçº§3: å…¶ä»–ç¬¬ä¸‰æ–¹ API
ç´§æ€¥æ¢å¤: å¼ºåˆ¶ä½¿ç”¨ Gemini ç¯å¢ƒå˜é‡
```

#### ğŸ“ æç¤ºè¯ç®¡ç†

##### é»‘æ¿ç”»æç¤ºè¯æ¨¡æ¿
```
è¯·ç”Ÿæˆä¸€å¼ {è§’è‰²åç§°}çš„é»‘æ¿ç²‰ç¬”ç”»ï¼Œè¦æ±‚ï¼š
1. é»‘è‰²é»‘æ¿èƒŒæ™¯ï¼Œæœ‰ç²‰ç¬”è´¨æ„Ÿ
2. è§’è‰²å½¢è±¡å¯çˆ±ï¼Œçº¿æ¡ç®€æ´
3. å…·æœ‰æ•™å®¤é»‘æ¿ç”»çš„è‰ºæœ¯é£æ ¼
4. ç²‰ç¬”çº¹ç†æ˜æ˜¾ï¼Œæœ‰è½»å¾®çš„ç²‰ç¬”ç°æ•ˆæœ
```

##### é£æ ¼æ‰©å±•
- æ”¯æŒå¤šè¯­è¨€æç¤ºè¯
- å˜é‡æ›¿æ¢ç³»ç»Ÿï¼ˆ{è§’è‰²åç§°}ï¼‰
- å®Œæ•´æ¨¡æ¿ç¼–è¾‘å™¨
- å®æ—¶æ•ˆæœé¢„è§ˆ

#### ğŸ–¼ï¸ å›¾ç‰‡åº“ç®¡ç†
- **æ·»åŠ ä½œå“**: ä¸Šä¼ ä¼˜ç§€ä½œå“åˆ°ç”»å»Š
- **è½®æ’­å±•ç¤º**: å‰ç«¯è‡ªåŠ¨è½®æ’­å±•ç¤º
- **æ‰¹é‡ç®¡ç†**: æ”¯æŒæ‰¹é‡æ·»åŠ å’Œåˆ é™¤

## ğŸ”§ é«˜çº§é…ç½®è¯¦è§£

### å¤š API å…œåº•æœºåˆ¶è¯¦è§£

#### å·¥ä½œæµç¨‹
```mermaid
graph TD
    A[ç”¨æˆ·å‘èµ·è¯·æ±‚] --> B{æ£€æŸ¥ Gemini API}
    B -->|å¯ç”¨| C[ä½¿ç”¨ Gemini ç”Ÿæˆ]
    B -->|ä¸å¯ç”¨| D[æ£€æŸ¥ç¬¬ä¸‰æ–¹ API ä¼˜å…ˆçº§ 2]
    D -->|å¯ç”¨| E[ä½¿ç”¨ç¬¬ä¸‰æ–¹ API ç”Ÿæˆ]
    D -->|ä¸å¯ç”¨| F[æ£€æŸ¥ä¼˜å…ˆçº§ 3]
    F --> G[ç»§ç»­æ£€æŸ¥ä¸‹ä¸€ä¼˜å…ˆçº§]
    G -->|å…¨éƒ¨å¤±è´¥| H[å¯åŠ¨ç´§æ€¥æ¢å¤]
    C --> I[è¿”å›ç»“æœ]
    E --> I
    H --> J[å¼ºåˆ¶ä½¿ç”¨ Gemini]
    J --> I
```

#### æ•…éšœè½¬ç§»è§„åˆ™
1. **ä¸» API å¤±è´¥**: ç«‹å³åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªä¼˜å…ˆçº§ API
2. **è¿ç»­å¤±è´¥ 3 æ¬¡**: è‡ªåŠ¨ç¦ç”¨è¯¥ API 30 åˆ†é’Ÿ
3. **å…¨éƒ¨å¤±è´¥**: å¯åŠ¨ç´§æ€¥æ¢å¤æ¨¡å¼
4. **è‡ªåŠ¨æ¢å¤**: 30 åˆ†é’Ÿåé‡æ–°å°è¯•ç¦ç”¨çš„ API

### é”™è¯¯å¤„ç†å’Œè¯Šæ–­

#### å¸¸è§é”™è¯¯ç±»å‹
- **401 è®¤è¯å¤±è´¥**: API å¯†é’¥é”™è¯¯æˆ–è¿‡æœŸ
- **429 é¢‘ç‡é™åˆ¶**: API è°ƒç”¨è¿‡äºé¢‘ç¹
- **500 æœåŠ¡é”™è¯¯**: æœåŠ¡å•†å†…éƒ¨é”™è¯¯
- **ç½‘ç»œè¶…æ—¶**: è¿æ¥è¶…æ—¶ï¼ˆé»˜è®¤ 30 ç§’ï¼‰

#### è°ƒè¯•å·¥å…·
```bash
# æŸ¥çœ‹ Cloudflare Functions æ—¥å¿—
Cloudflare Dashboard â†’ Pages â†’ ai-chalkboard-art â†’ Functions â†’ Logs

# æµè§ˆå™¨æ§åˆ¶å°è°ƒè¯•
F12 â†’ Console â†’ æŸ¥çœ‹å®æ—¶è°ƒè¯•ä¿¡æ¯

# API çŠ¶æ€æŸ¥çœ‹
è®¿é—® /api/admin-config â†’ æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
```

### ç¯å¢ƒå˜é‡è¯¦ç»†è¯´æ˜

```bash
# === å¿…éœ€é…ç½® ===
GEMINI_API_KEY=AIzaSy...              # Google Gemini API å¯†é’¥
KV_AI_CHALKBOARD=kv_namespace_id      # KV å­˜å‚¨å‘½åç©ºé—´ ID
R2_BUCKET=bucket_name                 # R2 å­˜å‚¨æ¡¶åç§°

# === å¯é€‰é…ç½® ===
AI_MODEL_URL=https://api.example.com/v1  # è‡ªå®šä¹‰ API ç«¯ç‚¹
ADMIN_KV_NAMESPACE=admin_kv_id         # ç®¡ç†é…ç½®ä¸“ç”¨ KVï¼ˆå¯é€‰ï¼‰
```

#### é…ç½®éªŒè¯å‘½ä»¤
```bash
# éªŒè¯ç¯å¢ƒå˜é‡
curl -X GET "https://ai-chalkboard-art.pages.dev/api/admin-config"

# æµ‹è¯• Gemini API
curl -X POST "https://generativelanguage.googleapis.com/v1beta/models/gemini-3-pro-image-preview:generateContent" \
  -H "Content-Type: application/json" \
  -H "x-goog-api-key: YOUR_GEMINI_KEY" \
  -d '{"contents":[{"parts":[{"text":"Test message"}]}]}'
```

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„è¯¦è§£

### å‰ç«¯æ¶æ„
```
public/
â”œâ”€â”€ index.html          # ä¸»ç”¨æˆ·ç•Œé¢
â””â”€â”€ admin.html          # ç®¡ç†åå°ç•Œé¢

æŠ€æœ¯æ ˆï¼š
- HTML5 + CSS3 + Vanilla JavaScript
- Tailwind CSS (CDN)
- å“åº”å¼è®¾è®¡
- å›¾ç‰‡è½®æ’­ç³»ç»Ÿ
- å®æ—¶çŠ¶æ€æ›´æ–°
```

### åç«¯æ¶æ„
```
functions/
â”œâ”€â”€ types.ts                # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ api/                    # API ç«¯ç‚¹
â”‚   â”œâ”€â”€ generate.ts         # æ ‡å‡†å›¾ç‰‡ç”Ÿæˆ API
â”‚   â”œâ”€â”€ generate-new.ts     # æ™ºèƒ½å…œåº•ç”Ÿæˆ API
â”‚   â”œâ”€â”€ admin-config.ts     # ç®¡ç†é…ç½® API
â”‚   â”œâ”€â”€ admin-api-config.ts # API ç®¡ç† API
â”‚   â””â”€â”€ admin-gallery.ts    # å›¾ç‰‡åº“ç®¡ç† API
â””â”€â”€ lib/                    # æ ¸å¿ƒåº“æ–‡ä»¶
    â”œâ”€â”€ api-manager.ts      # å¤š API ç®¡ç†å™¨
    â”œâ”€â”€ grok.ts             # Grok API é€‚é…å™¨
    â”œâ”€â”€ gemini.ts           # Gemini API é€‚é…å™¨
    â”œâ”€â”€ image-generator.ts  # å›¾ç‰‡ç”Ÿæˆæ ¸å¿ƒ
    â”œâ”€â”€ prompts.ts          # æç¤ºè¯ç®¡ç†
    â””â”€â”€ key-manager.ts      # å¯†é’¥ç®¡ç†å™¨
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

#### APIManager (api-manager.ts)
**èŒè´£**: å¤š API ç»Ÿä¸€ç®¡ç†å’Œæ™ºèƒ½è°ƒåº¦
```typescript
class APIManager {
  // è·å–å¯ç”¨ API åˆ—è¡¨ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰
  async getAvailableAPIs(): Promise<APIProvider[]>
  
  // æ™ºèƒ½ç”Ÿæˆï¼ˆå¤šå±‚å…œåº•ï¼‰
  async generateImageWithFallback(prompt: string): Promise<GenerationResult>
  
  // ç´§æ€¥æ¢å¤æ¨¡å¼
  async emergencyRecovery(prompt: string): Promise<GenerationResult>
}
```

#### GrokAPI (grok.ts)
**èŒè´£**: Grok API é€‚é…å™¨ï¼Œæ”¯æŒ OpenAI å…¼å®¹ç«¯ç‚¹
```typescript
class GrokAPI {
  // ç”Ÿæˆå›¾ç‰‡ï¼ˆé€šè¿‡ chat/completionsï¼‰
  async generateImage(prompt: string): Promise<string>
  
  // è¿æ¥æµ‹è¯•ï¼ˆæ”¯æŒ /models å’Œ /chat/completionsï¼‰
  async testConnection(): Promise<TestResult>
}
```

#### KeyManager (key-manager.ts)
**èŒè´£**: API å¯†é’¥è½®æ¢å’ŒçŠ¶æ€ç®¡ç†
```typescript
class KeyManager {
  // è·å–ä¸‹ä¸€ä¸ªå¯ç”¨å¯†é’¥
  getNextKey(): string
  
  // æ›´æ–°å¯†é’¥çŠ¶æ€
  updateKeyStatus(key: string, status: string): Promise<void>
}
```

### æ•°æ®å­˜å‚¨æ–¹æ¡ˆ

#### KV å­˜å‚¨ï¼ˆé…ç½®æ•°æ®ï¼‰
```typescript
interface AdminConfig {
  gallery_images: string[];      // å›¾ç‰‡åº“ URL åˆ—è¡¨
  api_configs: ApiConfig[];      // API é…ç½®åˆ—è¡¨
  prompts: PromptConfig[];       // æç¤ºè¯æ¨¡æ¿
  admin_credentials: {           // ç®¡ç†å‘˜å‡­è¯
    username: string;
    password: string;
  };
}
```

#### R2 å­˜å‚¨ï¼ˆå›¾ç‰‡æ–‡ä»¶ï¼‰
- **å›¾ç‰‡æ ¼å¼**: PNGã€JPEG
- **å‘½åè§„åˆ™**: `ai-chalkboard-{character}-{timestamp}.png`
- **å…¬å…±è®¿é—®**: æ”¯æŒè‡ªå®šä¹‰åŸŸåç»‘å®š
- **è‡ªåŠ¨æ¸…ç†**: å¯é…ç½®ä¿ç•™æœŸé™

## ğŸ“Š ç›‘æ§å’Œè¿ç»´

### å®æ—¶çŠ¶æ€é¢æ¿
è®¿é—®ç®¡ç†åå°å¯æŸ¥çœ‹ï¼š
- API æ€»æ•°é‡å’Œå¯ç”¨çŠ¶æ€
- å„ API é”™è¯¯è®¡æ•°ç»Ÿè®¡
- æœ€è¿‘ç”ŸæˆæˆåŠŸç‡
- å“åº”æ—¶é—´ç»Ÿè®¡

### æ€§èƒ½ç›‘æ§æŒ‡æ ‡
```typescript
interface Metrics {
  total_requests: number;        // æ€»è¯·æ±‚æ•°
  success_rate: number;          // æˆåŠŸç‡
  avg_response_time: number;     // å¹³å‡å“åº”æ—¶é—´
  api_health: {                  // API å¥åº·çŠ¶æ€
    [api_name]: {
      enabled: boolean;
      error_count: number;
      last_used: timestamp;
    }
  };
}
```

### æ—¥å¿—åˆ†æ
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
wrangler pages deploy tail --project-name ai-chalkboard-art

# è¿‡æ»¤é”™è¯¯æ—¥å¿—
wrangler pages deploy tail --filter="ERROR" --project-name ai-chalkboard-art

# å®æ—¶ç›‘æ§
wrangler pages deploy tail --follow --project-name ai-chalkboard-art
```

## ğŸ”’ å®‰å…¨æ€§æŒ‡å—

### è®¤è¯ç³»ç»Ÿ
- **Token-Based è®¤è¯**: åŸºäº JWT çš„å®‰å…¨ä»¤ç‰Œ
- **å¯†ç åŠ å¯†**: ä½¿ç”¨ BCrypt åŠ å¯†å­˜å‚¨
- **ä¼šè¯ç®¡ç†**: è‡ªåŠ¨è¿‡æœŸå’Œåˆ·æ–°æœºåˆ¶

### æ•°æ®ä¿æŠ¤
- **API å¯†é’¥åŠ å¯†**: KV å­˜å‚¨å‰è‡ªåŠ¨åŠ å¯†
- **æ•æ„Ÿæ•°æ®è„±æ•**: å‰ç«¯ä¸æ˜¾ç¤ºå®Œæ•´å¯†é’¥
- **è®¿é—®æ—¥å¿—**: å®Œæ•´çš„æ“ä½œå®¡è®¡è®°å½•

### ç½‘ç»œå®‰å…¨
```bash
# HTTPS å¼ºåˆ¶é‡å®šå‘
# Cloudflare é»˜è®¤æä¾› SSL/TLS åŠ å¯†

# CORS é…ç½®
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE
Access-Control-Allow-Headers: Authorization, Content-Type

# å®‰å…¨å¤´é…ç½®
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
```

## ğŸš€ æ•…éšœæ’æŸ¥æ‰‹å†Œ

### å¸¸è§é—®é¢˜è§£å†³

#### Q1: éƒ¨ç½²åé¡µé¢æ˜¾ç¤ºç©ºç™½ï¼Ÿ
**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥ Functions éƒ¨ç½²çŠ¶æ€
ç­‰å¾… 1-2 åˆ†é’Ÿè®© Cloudflare å®Œæˆéƒ¨ç½²

# 2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
Ctrl+Shift+R å¼ºåˆ¶åˆ·æ–°

# 3. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
ç¡®ä¿ GEMINI_API_KEYã€KV_AI_CHALKBOARDã€R2_BUCKET éƒ½å·²æ­£ç¡®é…ç½®
```

#### Q2: API æµ‹è¯•è¿æ¥å¤±è´¥ï¼Ÿ
**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. éªŒè¯ API å¯†é’¥æ ¼å¼
ç¡®ä¿å¯†é’¥æ²¡æœ‰å¤šä½™ç©ºæ ¼ï¼Œå®Œæ•´å¤åˆ¶

# 2. æ£€æŸ¥ç½‘ç»œè¿æ¥
curl -I https://api.x.ai/v1/models

# 3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
æµè§ˆå™¨ F12 â†’ Network â†’ æŸ¥çœ‹å¤±è´¥è¯·æ±‚çš„ Response
```

#### Q3: ç”Ÿæˆå¤±è´¥æç¤º 429 é”™è¯¯ï¼Ÿ
**è§£å†³æ–¹æ¡ˆ**:
- è¿™æ˜¯æ­£å¸¸çš„é¢‘ç‡é™åˆ¶
- ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨ API
- å»ºè®®æ·»åŠ æ›´å¤šç¬¬ä¸‰æ–¹ API ä½œä¸ºå…œåº•

#### Q4: å›¾ç‰‡æ— æ³•åŠ è½½ï¼Ÿ
**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥ R2 å­˜å‚¨é…ç½®
ç¡®ä¿ R2_BUCKET ç»‘å®šæ­£ç¡®

# 2. éªŒè¯å›¾ç‰‡ URL æœ‰æ•ˆæ€§
curl -I "https://your-r2-domain.com/path/to/image.png"

# 3. æ£€æŸ¥å…¬å…±è®¿é—®æƒé™
R2 å­˜å‚¨æ¡¶éœ€è¦è®¾ç½®å…¬å…±è¯»å–æƒé™
```

### è°ƒè¯•å·¥å…·ä½¿ç”¨

#### æµè§ˆå™¨å¼€å‘è€…å·¥å…·
```javascript
// 1. æŸ¥çœ‹ API è°ƒç”¨è¯¦æƒ…
F12 â†’ Network â†’ æŸ¥çœ‹ /api/generate è¯·æ±‚

// 2. ç›‘æ§æ§åˆ¶å°æ—¥å¿—
F12 â†’ Console â†’ æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

// 3. æ£€æŸ¥æœ¬åœ°å­˜å‚¨
Application â†’ Local Storage â†’ æŸ¥çœ‹ä½¿ç”¨è®¡æ•°
```

#### Cloudflare æ—¥å¿—
```bash
# å®æ—¶æ—¥å¿—ç›‘æ§
wrangler pages deploy tail --project-name ai-chalkboard-art

# å¯¼å‡ºæ—¥å¿—è¿›è¡Œåˆ†æ
wrangler pages deploy tail --format=json > logs.json
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### å‰ç«¯ä¼˜åŒ–
- **å›¾ç‰‡é¢„åŠ è½½**: è½®æ’­å›¾ç‰‡é¢„å…ˆç¼“å­˜
- **æ‡’åŠ è½½**: å¤§å›¾ç‰‡æŒ‰éœ€åŠ è½½
- **CDN åŠ é€Ÿ**: åˆ©ç”¨ Cloudflare å…¨çƒç½‘ç»œ

### åç«¯ä¼˜åŒ–
- **API è¿æ¥æ± **: å¤ç”¨ HTTP è¿æ¥
- **å¯†é’¥è½®æ¢**: è´Ÿè½½å‡è¡¡å¤šä¸ªå¯†é’¥
- **ç¼“å­˜ç­–ç•¥**: KV å¯ç”¨ TTL ç¼“å­˜

### æˆæœ¬ä¼˜åŒ–
- **å…è´¹é¢åº¦åˆ©ç”¨**: å……åˆ†ä½¿ç”¨ Cloudflare å…è´¹è®¡åˆ’
- **API è°ƒç”¨ä¼˜åŒ–**: å‡å°‘æ— æ•ˆè¯·æ±‚
- **å›¾ç‰‡å‹ç¼©**: R2 å¯ç”¨è‡ªåŠ¨å‹ç¼©

## ğŸ—ºï¸ æœªæ¥å‘å±•è§„åˆ’

### çŸ­æœŸç›®æ ‡ï¼ˆ1-2 ä¸ªæœˆï¼‰
- [ ] æ›´å¤šè‰ºæœ¯é£æ ¼æ”¯æŒï¼ˆæ²¹ç”»ã€æ°´å½©ã€åƒç´ é£ï¼‰
- [ ] æ‰¹é‡ç”ŸæˆåŠŸèƒ½
- [ ] ç”¨æˆ·ç”Ÿæˆå†å²è®°å½•
- [ ] ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–

### ä¸­æœŸç›®æ ‡ï¼ˆ3-6 ä¸ªæœˆï¼‰
- [ ] æ›´å¤šç¬¬ä¸‰æ–¹ API æ”¯æŒï¼ˆClaudeã€LLaVAï¼‰
- [ ] æœ¬åœ°æ¨¡å‹é›†æˆ
- [ ] ç”¨æˆ·åé¦ˆå’Œè¯„åˆ†ç³»ç»Ÿ
- [ ] é«˜çº§å‚æ•°è°ƒèŠ‚

### é•¿æœŸç›®æ ‡ï¼ˆ6-12 ä¸ªæœˆï¼‰
- [ ] API å¸‚åœºé›†æˆ
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ä¼ä¸šçº§åŠŸèƒ½ï¼ˆå›¢é˜Ÿåä½œã€æƒé™ç®¡ç†ï¼‰
- [ ] æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿

### æŠ€æœ¯æ¼”è¿›
- [ ] WebAssembly å›¾åƒå¤„ç†
- [ ] Edge AI æ¨¡å‹æ¨ç†
- [ ] å®æ—¶åä½œåŠŸèƒ½
- [ ] åŒºå—é“¾ç‰ˆæƒä¿æŠ¤

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¼€å‘ç¯å¢ƒæ­å»º

#### 1. å…‹éš†å’Œå®‰è£…
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/keenturbo/AI-Chalkboard-Art.git
cd AI-Chalkboard-Art

# å®‰è£…å¼€å‘ä¾èµ–
npm install

# å®‰è£… Wrangler CLI
npm install -g wrangler
```

#### 2. æœ¬åœ°å¼€å‘
```bash
# å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨
npm run dev

# æˆ–è€…ä½¿ç”¨ Wrangler
npx wrangler pages dev public

# æœ¬åœ°è°ƒè¯•ç¯å¢ƒ
è®¿é—® http://localhost:8787
```

#### 3. ç¯å¢ƒå˜é‡é…ç½®
```bash
# åˆ›å»ºå¼€å‘ç¯å¢ƒå˜é‡æ–‡ä»¶
echo "GEMINI_API_KEY=your_dev_key" > .dev.vars
echo "KV_AI_CHALKBOARD=dev_kv" >> .dev.vars
echo "R2_BUCKET=dev_bucket" >> .dev.vars
```

### ä»£ç è§„èŒƒ

#### TypeScript é…ç½®
```json
{
  "compilerOptions": {
    "strict": true,
    "target": "ES2022",
    "module": "ESNext",
    "moduleResolution": "Node"
  }
}
```

#### ä»£ç é£æ ¼
- **ç¼©è¿›**: 2 ä¸ªç©ºæ ¼
- **å¼•å·**: å•å¼•å·ä¼˜å…ˆ
- **å‘½å**: camelCase for variables, PascalCase for classes
- **æ³¨é‡Š**: JSDoc æ ¼å¼

#### æäº¤è§„èŒƒ
```bash
# åŠŸèƒ½å¼€å‘
git commit -m "feat: æ·»åŠ æ–°çš„è‰ºæœ¯é£æ ¼æ”¯æŒ"

# ä¿®å¤é—®é¢˜
git commit -m "fix: ä¿®å¤ API è¿æ¥è¶…æ—¶é—®é¢˜"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°éƒ¨ç½²è¯´æ˜"

# ä»£ç ä¼˜åŒ–
git commit -m "perf: ä¼˜åŒ–å›¾ç‰‡åŠ è½½æ€§èƒ½"
```

### Pull Request æµç¨‹
1. Fork é¡¹ç›®åˆ°ä¸ªäººä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/new-style`)
3. æäº¤æ›´æ”¹ (`git commit -am 'Add new style support'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/new-style`)
5. åˆ›å»º Pull Request
6. ç­‰å¾…ä»£ç å®¡æŸ¥å’Œåˆå¹¶

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

### è®¸å¯è¯è¦ç‚¹
- âœ… å•†ä¸šä½¿ç”¨
- âœ… ä¿®æ”¹å’Œåˆ†å‘
- âœ… ç§äººä½¿ç”¨
- âŒ éœ€è¦åŒ…å«è®¸å¯è¯å’Œç‰ˆæƒå£°æ˜
- âŒ ä¸æä¾›æ‹…ä¿

## ğŸ™ è‡´è°¢ä¸é¸£è°¢

### æŠ€æœ¯åˆä½œä¼™ä¼´
- **Google Generative AI**: æä¾›å¼ºå¤§çš„å›¾ç‰‡ç”Ÿæˆèƒ½åŠ›
- **OpenAI API æ ‡å‡†**: ä¸ºç¬¬ä¸‰æ–¹é›†æˆæä¾›ç»Ÿä¸€è§„èŒƒ
- **Cloudflare**: æä¾›å¯é çš„è¾¹ç¼˜è®¡ç®—åŸºç¡€è®¾æ–½

### å¼€æºé¡¹ç›®
- **Tailwind CSS**: ç°ä»£åŒ–çš„ CSS æ¡†æ¶
- **TypeScript**: æä¾›ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ
- **GitHub Actions**: è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œé›†æˆ

### ç¤¾åŒºè´¡çŒ®è€…
æ„Ÿè°¢æ‰€æœ‰ä¸ºé¡¹ç›®è´¡çŒ®ä»£ç ã€åé¦ˆå»ºè®®çš„ç”¨æˆ·ï¼

### ç‰¹åˆ«é¸£è°¢
- æµ‹è¯•ç”¨æˆ·æä¾›çš„å®è´µåé¦ˆ
- å¼€æºç¤¾åŒºçš„æŠ€æœ¯æ”¯æŒå’Œçµæ„Ÿ

---

## ğŸ“ è”ç³»ä¸æ”¯æŒ

### è·å–å¸®åŠ©
- **GitHub Issues**: [æäº¤é—®é¢˜](https://github.com/keenturbo/AI-Chalkboard-Art/issues)
- **é¡¹ç›®ä¸»é¡µ**: [GitHub Repository](https://github.com/keenturbo/AI-Chalkboard-Art)
- **å®æ—¶æ¼”ç¤º**: [åœ¨çº¿ä½“éªŒ](https://ai-chalkboard-art.pages.dev)

### å•†åŠ¡åˆä½œ
- æŠ€æœ¯å’¨è¯¢å’Œå®šåˆ¶å¼€å‘
- ä¼ä¸šçº§éƒ¨ç½²æ”¯æŒ
- è”ç³»é‚®ç®±: turbokeem@gmail.com

---

## ğŸ‰ å¼€å§‹ä½ çš„ AI åˆ›ä½œä¹‹æ—…ï¼

1. **ä¸€é”®éƒ¨ç½²**: æŒ‰ç…§ä¸Šé¢çš„éƒ¨ç½²æŒ‡å—ï¼Œ5 åˆ†é’Ÿå†…æ‹¥æœ‰è‡ªå·±çš„ AI ç”»æ¿
2. **å¼€å§‹åˆ›ä½œ**: è¾“å…¥ä½ å–œæ¬¢çš„è§’è‰²ï¼Œè®© AI ä¸ºä½ åˆ›ä½œç‹¬ç‰¹çš„é»‘æ¿ç”»ä½œå“
3. **è‡ªå®šä¹‰æ‰©å±•**: æ·»åŠ æ›´å¤š API å’Œé£æ ¼ï¼Œæ‰“é€ ä¸“å±çš„ AI è‰ºæœ¯å¹³å°

**äº«å—åˆ›ä½œçš„ä¹è¶£ï¼Œæ¢ç´¢ AI è‰ºæœ¯çš„æ— é™å¯èƒ½ï¼** ğŸš€

---

*æœ€åæ›´æ–°: 2024-12-04 | ç‰ˆæœ¬: v1.0.0 | æ–‡æ¡£çŠ¶æ€: å®Œæ•´ç‰ˆ*